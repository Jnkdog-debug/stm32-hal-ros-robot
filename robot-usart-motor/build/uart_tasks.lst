ARM GAS  /tmp/ccq7x5yX.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"uart_tasks.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/uart_tasks.c"
  20              		.section	.text.StartUartRxTask,"ax",%progbits
  21              		.align	1
  22              		.global	StartUartRxTask
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	StartUartRxTask:
  28              	.LVL0:
  29              	.LFB138:
   1:Core/Src/uart_tasks.c **** #include "uart_tasks.h" // ÂåÖÂê´‰ªªÂä°ÂáΩÊï∞Â£∞Êòé
   2:Core/Src/uart_tasks.c **** #include "protocol.h"
   3:Core/Src/uart_tasks.c **** #include "uart_driver.h"
   4:Core/Src/uart_tasks.c **** #include "cmsis_os.h" // Á°Æ‰øùÂåÖÂê´ RTOS API
   5:Core/Src/uart_tasks.c **** 
   6:Core/Src/uart_tasks.c **** // ÂºïÁî® CubeMX Ëá™Âä®ÁîüÊàêÁöÑÂè•ÊüÑ (CMSIS API)
   7:Core/Src/uart_tasks.c **** extern osMessageQueueId_t UartTxQueueHandle;
   8:Core/Src/uart_tasks.c **** extern osSemaphoreId_t UartTxDoneSemaphoreHandle;
   9:Core/Src/uart_tasks.c **** 
  10:Core/Src/uart_tasks.c **** // ÂºïÁî®Âú® freertos.c ‰∏≠ÂÆö‰πâÁöÑ‰ªªÂä°Âè•ÊüÑÔºà‰æõ ISR ‰ΩøÁî®Ôºâ
  11:Core/Src/uart_tasks.c **** extern TaskHandle_t UartRxTaskHandle;
  12:Core/Src/uart_tasks.c **** 
  13:Core/Src/uart_tasks.c **** // ÂÆö‰πâÂú® uart_driver.h ‰∏≠Â£∞ÊòéÁöÑÂÖ®Â±ÄÂè•ÊüÑÔºà‰æõ IDLE ISR ‰ΩøÁî®Ôºâ
  14:Core/Src/uart_tasks.c **** TaskHandle_t UartRxTaskHandle_ISR = NULL;
  15:Core/Src/uart_tasks.c **** 
  16:Core/Src/uart_tasks.c **** // ÂÆö‰πâ FreeRTOS ÂéüÁîüÈòüÂàóÂè•ÊüÑÔºåÂ∞Ü CMSIS RTOS ÁöÑ osMessageQueueId_t ËΩ¨Êç¢‰∏∫ QueueHandle
  17:Core/Src/uart_tasks.c **** // osMessageQueueId_t ÂÆûÈôÖ‰∏äÊòØ QueueHandle_t ÁöÑÂåÖË£Ö
  18:Core/Src/uart_tasks.c **** QueueHandle_t UartTxQueue = NULL; 
  19:Core/Src/uart_tasks.c **** 
  20:Core/Src/uart_tasks.c **** 
  21:Core/Src/uart_tasks.c **** /**
  22:Core/Src/uart_tasks.c ****  * @brief Function implementing the UartRxTask thread.
  23:Core/Src/uart_tasks.c ****  */
  24:Core/Src/uart_tasks.c **** void StartUartRxTask(void *argument)
  25:Core/Src/uart_tasks.c **** {
  30              		.loc 1 25 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 592
  33              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccq7x5yX.s 			page 2


  34              		.loc 1 25 1 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
  40 0002 ADF5147D 		sub	sp, sp, #592
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 600
  26:Core/Src/uart_tasks.c ****     // ÂàùÂßãÂåñ FreeRTOS ÂéüÁîüÈòüÂàóÂè•ÊüÑÔºàÂ∞Ü CMSIS RTOS Âè•ÊüÑËΩ¨Êç¢‰∏∫ FreeRTOS Âè•ÊüÑÔºâ
  27:Core/Src/uart_tasks.c ****     // osMessageQueueId_t Âú® CMSIS RTOS ‰∏≠ÂÆûÈôÖ‰∏äÂ∞±ÊòØ QueueHandle_t
  28:Core/Src/uart_tasks.c ****     UartTxQueue = (QueueHandle_t)UartTxQueueHandle;
  43              		.loc 1 28 5 is_stmt 1 view .LVU2
  44              		.loc 1 28 17 is_stmt 0 view .LVU3
  45 0006 154B     		ldr	r3, .L8
  46 0008 1A68     		ldr	r2, [r3]
  47 000a 154B     		ldr	r3, .L8+4
  48 000c 1A60     		str	r2, [r3]
  29:Core/Src/uart_tasks.c ****     
  30:Core/Src/uart_tasks.c ****     // ‰ªªÂä°ÁßÅÊúâÁºìÂÜ≤Âå∫ÔºöÁî®‰∫éÊã∑Ë¥ùÊé•Êî∂Âà∞ÁöÑÊï∞ÊçÆÂ∏ß
  31:Core/Src/uart_tasks.c ****     // Ê≥®ÊÑèÔºöËøô‰∏™ÁºìÂÜ≤Âå∫Â§ßÂ∞èÈúÄË¶ÅËá≥Â∞ëËÉΩÂÆπÁ∫≥‰∏ÄÂ∏ßÊúÄÂ§ßÁöÑÊï∞ÊçÆÂåÖ„ÄÇ
  32:Core/Src/uart_tasks.c ****     // Êàë‰ª¨‰ΩøÁî®Âíå DMA ÁéØÂΩ¢ÁºìÂÜ≤Âå∫‰∏ÄÊ†∑ÁöÑÂ§ßÂ∞èÔºåÁÆÄÂåñÂ§ÑÁêÜ„ÄÇ
  33:Core/Src/uart_tasks.c ****     uint8_t local_rx_buffer[UART_RX_BUFFER_SIZE]; 
  49              		.loc 1 33 5 is_stmt 1 view .LVU4
  34:Core/Src/uart_tasks.c ****     uint32_t received_length = 0;
  50              		.loc 1 34 5 view .LVU5
  51              		.loc 1 34 14 is_stmt 0 view .LVU6
  52 000e 0023     		movs	r3, #0
  53 0010 1393     		str	r3, [sp, #76]
  35:Core/Src/uart_tasks.c ****     
  36:Core/Src/uart_tasks.c ****     // 1. ËÆæÁΩÆ‰ªªÂä°Âè•ÊüÑ (‰æõ IDLE ‰∏≠Êñ≠ÈÄöÁü•‰ΩøÁî®)
  37:Core/Src/uart_tasks.c ****     // ÂøÖÈ°ªÂú®‰ªªÂä°ÂÜÖÈÉ®Ë∞ÉÁî®ÔºåÂõ†‰∏∫‰ªªÂä°Âè•ÊüÑÂè™ÊúâÂú®‰ªªÂä°ËøêË°åÊó∂ÊâçÁ°ÆÂÆö„ÄÇ
  38:Core/Src/uart_tasks.c ****     UartRxTaskHandle = xTaskGetCurrentTaskHandle();
  54              		.loc 1 38 5 is_stmt 1 view .LVU7
  55              		.loc 1 38 24 is_stmt 0 view .LVU8
  56 0012 FFF7FEFF 		bl	xTaskGetCurrentTaskHandle
  57              	.LVL1:
  58              		.loc 1 38 22 discriminator 1 view .LVU9
  59 0016 134B     		ldr	r3, .L8+8
  60 0018 1860     		str	r0, [r3]
  39:Core/Src/uart_tasks.c ****     
  40:Core/Src/uart_tasks.c ****     // 2. ÂêØÂä® DMA Âæ™ÁéØÊé•Êî∂
  41:Core/Src/uart_tasks.c ****     // ÂøÖÈ°ªÂú® IDLE ‰∏≠Êñ≠ÂêØÁî®‰πãÂâçÊàñÂêåÊó∂ÂêØÂä®
  42:Core/Src/uart_tasks.c ****     UART_Start_DMA_Receive(&huart3); 
  61              		.loc 1 42 5 is_stmt 1 view .LVU10
  62 001a 1348     		ldr	r0, .L8+12
  63 001c FFF7FEFF 		bl	UART_Start_DMA_Receive
  64              	.LVL2:
  65              	.L3:
  43:Core/Src/uart_tasks.c ****     
  44:Core/Src/uart_tasks.c ****     /* Infinite loop */
  45:Core/Src/uart_tasks.c ****     for(;;)
  66              		.loc 1 45 5 view .LVU11
  46:Core/Src/uart_tasks.c ****     {
  47:Core/Src/uart_tasks.c ****         // 3. ÈòªÂ°ûÁ≠âÂæÖ IDLE ‰∏≠Êñ≠ÈÄöÁü•
  48:Core/Src/uart_tasks.c ****         // xTaskNotifyWaitÔºöÁ≠âÂæÖÊù•Ëá™ ISR ÁöÑÈÄöÁü•ÔºåÂπ∂Êé•Êî∂ÈÄöÁü•ÂÄº (Âç≥Êï∞ÊçÆÈïøÂ∫¶)
  49:Core/Src/uart_tasks.c ****         // ÂèÇÊï∞ÔºöulClearOnEntry=0 (‰∏çÊ∏ÖÈô§), ulClearOnExit=0 (‰∏çÊ∏ÖÈô§)Ôºå‰ΩÜ eSetValueWithOv
ARM GAS  /tmp/ccq7x5yX.s 			page 3


  50:Core/Src/uart_tasks.c ****         if (xTaskNotifyWait(0, 0, &received_length, portMAX_DELAY) == pdPASS) {
  67              		.loc 1 50 9 view .LVU12
  68              		.loc 1 50 13 is_stmt 0 view .LVU13
  69 0020 4FF0FF33 		mov	r3, #-1
  70 0024 13AA     		add	r2, sp, #76
  71 0026 0021     		movs	r1, #0
  72 0028 0846     		mov	r0, r1
  73 002a FFF7FEFF 		bl	xTaskNotifyWait
  74              	.LVL3:
  75              		.loc 1 50 12 discriminator 1 view .LVU14
  76 002e 0128     		cmp	r0, #1
  77 0030 F6D1     		bne	.L3
  78              	.LBB2:
  51:Core/Src/uart_tasks.c ****             
  52:Core/Src/uart_tasks.c ****             // 4. Ê£ÄÊü•Êï∞ÊçÆÊúâÊïàÊÄß
  53:Core/Src/uart_tasks.c ****             if (received_length == 0 || received_length > UART_RX_BUFFER_SIZE) {
  79              		.loc 1 53 13 is_stmt 1 view .LVU15
  80              		.loc 1 53 38 is_stmt 0 view .LVU16
  81 0032 139C     		ldr	r4, [sp, #76]
  82 0034 631E     		subs	r3, r4, #1
  83              		.loc 1 53 16 view .LVU17
  84 0036 B3F5007F 		cmp	r3, #512
  85 003a F1D2     		bcs	.L3
  54:Core/Src/uart_tasks.c ****                 // Êî∂Âà∞Á©∫ÈÄöÁü•ÊàñÈïøÂ∫¶ÂºÇÂ∏∏ÔºåÂøΩÁï•
  55:Core/Src/uart_tasks.c ****                 continue;
  56:Core/Src/uart_tasks.c ****             }
  57:Core/Src/uart_tasks.c **** 
  58:Core/Src/uart_tasks.c ****             // 5. Êï∞ÊçÆÊã∑Ë¥ù (Ê†∏ÂøÉÔºöÂ∞Ü DMA ÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆÊã∑Ë¥ùÂà∞‰ªªÂä°ÁßÅÊúâÊ†à)
  59:Core/Src/uart_tasks.c ****             // Êã∑Ë¥ùÁöÑÂéüÂõ†ÔºöDMA Â∑≤ÁªèÈáçÊñ∞ÂêØÂä®ÔºåÊ≠£Âú®ÂÜôÂÖ•ÁéØÂΩ¢ÁºìÂÜ≤Âå∫ÔºåÈò≤Ê≠¢Êï∞Êç
  60:Core/Src/uart_tasks.c ****             // ÂøÖÈ°ª‰ΩøÁî® DMA ÁºìÂÜ≤Âå∫ÁöÑÂâç received_length Â≠óËäÇ„ÄÇ
  61:Core/Src/uart_tasks.c ****             memcpy(local_rx_buffer, uart_rx_dma_buffer, received_length);
  86              		.loc 1 61 13 is_stmt 1 view .LVU18
  87 003c 2246     		mov	r2, r4
  88 003e 0B49     		ldr	r1, .L8+16
  89 0040 14A8     		add	r0, sp, #80
  90 0042 FFF7FEFF 		bl	memcpy
  91              	.LVL4:
  62:Core/Src/uart_tasks.c **** 
  63:Core/Src/uart_tasks.c ****             // 6. ÂçèËÆÆËß£Êûê
  64:Core/Src/uart_tasks.c ****             protocol_frame_t rx_frame;
  92              		.loc 1 64 13 view .LVU19
  65:Core/Src/uart_tasks.c ****             protocol_status_t status = Protocol_ParseFrame(local_rx_buffer, received_length, &rx_fr
  93              		.loc 1 65 13 view .LVU20
  94              		.loc 1 65 40 is_stmt 0 view .LVU21
  95 0046 01AA     		add	r2, sp, #4
  96 0048 A1B2     		uxth	r1, r4
  97 004a 14A8     		add	r0, sp, #80
  98 004c FFF7FEFF 		bl	Protocol_ParseFrame
  99              	.LVL5:
  66:Core/Src/uart_tasks.c ****             
  67:Core/Src/uart_tasks.c ****             // 7. ÁªìÊûúÂ§ÑÁêÜ
  68:Core/Src/uart_tasks.c ****             if (status == PROTOCOL_OK) {
 100              		.loc 1 68 13 is_stmt 1 view .LVU22
 101              		.loc 1 68 16 is_stmt 0 view .LVU23
 102 0050 0028     		cmp	r0, #0
 103 0052 E5D1     		bne	.L3
  69:Core/Src/uart_tasks.c ****                 
ARM GAS  /tmp/ccq7x5yX.s 			page 4


  70:Core/Src/uart_tasks.c ****                 // ÂçèËÆÆËß£ÊûêÊàêÂäüÔºåËøõË°åÂëΩ‰ª§ÂàÜÂèë
  71:Core/Src/uart_tasks.c ****                 Protocol_DispatchCommand(&rx_frame);
 104              		.loc 1 71 17 is_stmt 1 view .LVU24
 105 0054 01A8     		add	r0, sp, #4
 106              	.LVL6:
 107              		.loc 1 71 17 is_stmt 0 view .LVU25
 108 0056 FFF7FEFF 		bl	Protocol_DispatchCommand
 109              	.LVL7:
  72:Core/Src/uart_tasks.c ****                 
  73:Core/Src/uart_tasks.c ****             } else {
  74:Core/Src/uart_tasks.c ****                 // ÂçèËÆÆËß£ÊûêÂ§±Ë¥•ÔºàÊ†°È™åÈîôËØØ„ÄÅÂ∏ßÂ§¥ÈîôËØØÁ≠âÔºâ
  75:Core/Src/uart_tasks.c ****                 // ÂèØ‰ª•ÈÄâÊã©ÊâìÂç∞ÈîôËØØÊàñÂèëÈÄÅ‰∏Ä‰∏™ÈîôËØØÂ∫îÁ≠îÂ∏ß (NACK)
  76:Core/Src/uart_tasks.c ****                 // ‰æãÂ¶ÇÔºöProtocol_SendNACK(rx_frame.cmd_id, status);
  77:Core/Src/uart_tasks.c ****             }
 110              		.loc 1 77 13 is_stmt 1 view .LVU26
 111 005a E1E7     		b	.L3
 112              	.L9:
 113              		.align	2
 114              	.L8:
 115 005c 00000000 		.word	UartTxQueueHandle
 116 0060 00000000 		.word	UartTxQueue
 117 0064 00000000 		.word	UartRxTaskHandle
 118 0068 00000000 		.word	huart3
 119 006c 00000000 		.word	uart_rx_dma_buffer
 120              	.LBE2:
 121              		.cfi_endproc
 122              	.LFE138:
 124              		.section	.text.StartUartTxTask,"ax",%progbits
 125              		.align	1
 126              		.global	StartUartTxTask
 127              		.syntax unified
 128              		.thumb
 129              		.thumb_func
 131              	StartUartTxTask:
 132              	.LVL8:
 133              	.LFB139:
  78:Core/Src/uart_tasks.c ****         }
  79:Core/Src/uart_tasks.c ****     }
  80:Core/Src/uart_tasks.c **** }
  81:Core/Src/uart_tasks.c **** 
  82:Core/Src/uart_tasks.c **** 
  83:Core/Src/uart_tasks.c **** 
  84:Core/Src/uart_tasks.c **** /**
  85:Core/Src/uart_tasks.c ****  * @brief Function implementing the UartTxTask thread.
  86:Core/Src/uart_tasks.c ****  */
  87:Core/Src/uart_tasks.c **** void StartUartTxTask(void *argument)
  88:Core/Src/uart_tasks.c **** {
 134              		.loc 1 88 1 view -0
 135              		.cfi_startproc
 136              		@ args = 0, pretend = 0, frame = 72
 137              		@ frame_needed = 0, uses_anonymous_args = 0
 138              		.loc 1 88 1 is_stmt 0 view .LVU28
 139 0000 10B5     		push	{r4, lr}
 140              	.LCFI2:
 141              		.cfi_def_cfa_offset 8
 142              		.cfi_offset 4, -8
 143              		.cfi_offset 14, -4
ARM GAS  /tmp/ccq7x5yX.s 			page 5


 144 0002 92B0     		sub	sp, sp, #72
 145              	.LCFI3:
 146              		.cfi_def_cfa_offset 80
  89:Core/Src/uart_tasks.c ****     protocol_frame_t tx_frame;
 147              		.loc 1 89 5 is_stmt 1 view .LVU29
  90:Core/Src/uart_tasks.c ****     
  91:Core/Src/uart_tasks.c ****     // Â∞Ü CMSIS Âè•ÊüÑËΩ¨Êç¢‰∏∫ FreeRTOS Native Âè•ÊüÑÔºåÊñπ‰æøÂêåÊ≠•Êìç‰Ωú
  92:Core/Src/uart_tasks.c ****     SemaphoreHandle_t tx_done_semaphore_native = UartTxDoneSemaphoreHandle;
 148              		.loc 1 92 5 view .LVU30
 149              		.loc 1 92 23 is_stmt 0 view .LVU31
 150 0004 0D4B     		ldr	r3, .L15
 151 0006 1C68     		ldr	r4, [r3]
 152              	.LVL9:
 153              	.L11:
  93:Core/Src/uart_tasks.c ****     
  94:Core/Src/uart_tasks.c ****     /* Infinite loop */
  95:Core/Src/uart_tasks.c ****     for(;;)
 154              		.loc 1 95 5 is_stmt 1 view .LVU32
  96:Core/Src/uart_tasks.c ****     {
  97:Core/Src/uart_tasks.c ****         // 1. ÈòªÂ°ûÁ≠âÂæÖÂèëÈÄÅÈòüÂàó
  98:Core/Src/uart_tasks.c ****         // osMessageQueueGet: ÈòªÂ°ûÁ≠âÂæÖ UartTxQueueHandle ‰∏≠ÊúâÊï∞ÊçÆÂ∏ß
  99:Core/Src/uart_tasks.c ****         if (osMessageQueueGet(UartTxQueueHandle, &tx_frame, NULL, osWaitForever) == osOK) {
 155              		.loc 1 99 9 view .LVU33
 156              		.loc 1 99 13 is_stmt 0 view .LVU34
 157 0008 4FF0FF33 		mov	r3, #-1
 158 000c 0022     		movs	r2, #0
 159 000e 6946     		mov	r1, sp
 160 0010 0B48     		ldr	r0, .L15+4
 161 0012 0068     		ldr	r0, [r0]
 162 0014 FFF7FEFF 		bl	osMessageQueueGet
 163              	.LVL10:
 164              		.loc 1 99 12 discriminator 1 view .LVU35
 165 0018 0028     		cmp	r0, #0
 166 001a F5D1     		bne	.L11
 167              	.LBB3:
 100:Core/Src/uart_tasks.c ****             
 101:Core/Src/uart_tasks.c ****             // 2. ËÆ°ÁÆóÊÄªÈïøÂ∫¶
 102:Core/Src/uart_tasks.c ****             // ÈïøÂ∫¶ = Â∏ßÂ§¥ + ËΩΩËç∑ÈïøÂ∫¶ + CRCÈïøÂ∫¶
 103:Core/Src/uart_tasks.c ****             uint16_t total_len = FRAME_HEADER_SIZE + tx_frame.payload_len + FRAME_CRC_SIZE;
 168              		.loc 1 103 13 is_stmt 1 view .LVU36
 169              		.loc 1 103 62 is_stmt 0 view .LVU37
 170 001c 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 171              	.LVL11:
 104:Core/Src/uart_tasks.c ****             
 105:Core/Src/uart_tasks.c ****             // 3. ÂêØÂä® DMA ÂèëÈÄÅ
 106:Core/Src/uart_tasks.c ****             // Ê≥®ÊÑèÔºöÊàë‰ª¨ÂøÖÈ°ª‰ΩøÁî® non-blocking ÁöÑ DMA ÂèëÈÄÅÂáΩÊï∞
 107:Core/Src/uart_tasks.c ****             HAL_StatusTypeDef status = HAL_UART_Transmit_DMA(&huart3, (uint8_t*)&tx_frame, total_le
 172              		.loc 1 107 13 is_stmt 1 view .LVU38
 173              		.loc 1 107 40 is_stmt 0 view .LVU39
 174 0020 0632     		adds	r2, r2, #6
 175              	.LVL12:
 176              		.loc 1 107 40 view .LVU40
 177 0022 6946     		mov	r1, sp
 178 0024 0748     		ldr	r0, .L15+8
 179 0026 FFF7FEFF 		bl	HAL_UART_Transmit_DMA
 180              	.LVL13:
 108:Core/Src/uart_tasks.c ****             
ARM GAS  /tmp/ccq7x5yX.s 			page 6


 109:Core/Src/uart_tasks.c ****             if (status == HAL_OK) {
 181              		.loc 1 109 13 is_stmt 1 view .LVU41
 182              		.loc 1 109 16 is_stmt 0 view .LVU42
 183 002a 0028     		cmp	r0, #0
 184 002c ECD1     		bne	.L11
 110:Core/Src/uart_tasks.c ****                 
 111:Core/Src/uart_tasks.c ****                 // 4. Á≠âÂæÖÂèëÈÄÅÂÆåÊàê‰ø°Âè∑Èáè
 112:Core/Src/uart_tasks.c ****                 // Âú® HAL_UART_TxCpltCallback Ëß¶Âèë‰πãÂâçÔºå‰ªªÂä°Â∞ÜÂú®ËøôÈáåÈòªÂ°û
 113:Core/Src/uart_tasks.c ****                 // ‰ΩøÁî® FreeRTOS Native API Êù•Á≠âÂæÖ‰ø°Âè∑Èáè
 114:Core/Src/uart_tasks.c ****                 xSemaphoreTake(tx_done_semaphore_native, portMAX_DELAY);
 185              		.loc 1 114 17 is_stmt 1 view .LVU43
 186 002e 4FF0FF31 		mov	r1, #-1
 187 0032 2046     		mov	r0, r4
 188              	.LVL14:
 189              		.loc 1 114 17 is_stmt 0 view .LVU44
 190 0034 FFF7FEFF 		bl	xQueueSemaphoreTake
 191              	.LVL15:
 192 0038 E6E7     		b	.L11
 193              	.L16:
 194 003a 00BF     		.align	2
 195              	.L15:
 196 003c 00000000 		.word	UartTxDoneSemaphoreHandle
 197 0040 00000000 		.word	UartTxQueueHandle
 198 0044 00000000 		.word	huart3
 199              	.LBE3:
 200              		.cfi_endproc
 201              	.LFE139:
 203              		.section	.text.HAL_UART_TxCpltCallback,"ax",%progbits
 204              		.align	1
 205              		.global	HAL_UART_TxCpltCallback
 206              		.syntax unified
 207              		.thumb
 208              		.thumb_func
 210              	HAL_UART_TxCpltCallback:
 211              	.LVL16:
 212              	.LFB140:
 115:Core/Src/uart_tasks.c ****                 
 116:Core/Src/uart_tasks.c ****                 // ‰ø°Âè∑ÈáèË¢´ÈáäÊîæÂêéÔºåÂèëÈÄÅÂÆåÊàêÔºå‰ªªÂä°ÁªßÁª≠Âæ™ÁéØÔºåÂ§ÑÁêÜÈòüÂàó‰∏≠ÁöÑ‰∏
 117:Core/Src/uart_tasks.c ****                 
 118:Core/Src/uart_tasks.c ****             } else {
 119:Core/Src/uart_tasks.c ****                 // DMA ÂèëÈÄÅÂêØÂä®Â§±Ë¥• (‰æãÂ¶ÇÔºåDMA ÂøôÁ¢å)
 120:Core/Src/uart_tasks.c ****                 // Ê≠§Êó∂ÂèØ‰ª•ËÆ∞ÂΩïÈîôËØØÔºåÊàñËøõË°åÁü≠Êó∂Èó¥Âª∂Êó∂ÂêéÈáçËØï (ËøôÈáåÈÄâÊã©Áõ¥Êé•
 121:Core/Src/uart_tasks.c ****             }
 122:Core/Src/uart_tasks.c ****         }
 123:Core/Src/uart_tasks.c ****         
 124:Core/Src/uart_tasks.c ****         // ‰ªªÂä°Âæ™ÁéØÈùûÂ∏∏Âø´Ôºå‰∏çÈúÄË¶Å osDelayÔºåÂõ†‰∏∫ÂÆÉ‰∏ªË¶ÅË¢´ osMessageQueueGet ÈòªÂ°û
 125:Core/Src/uart_tasks.c ****     }
 126:Core/Src/uart_tasks.c **** }
 127:Core/Src/uart_tasks.c **** 
 128:Core/Src/uart_tasks.c **** void HAL_UART_TxCpltCallback(UART_HandleTypeDef *huart) {
 213              		.loc 1 128 57 is_stmt 1 view -0
 214              		.cfi_startproc
 215              		@ args = 0, pretend = 0, frame = 8
 216              		@ frame_needed = 0, uses_anonymous_args = 0
 129:Core/Src/uart_tasks.c ****     // Ê£ÄÊü•ÊòØÂê¶ÊòØÁõÆÊ†á UART
 130:Core/Src/uart_tasks.c ****     if (huart->Instance == huart3.Instance) { 
 217              		.loc 1 130 5 view .LVU46
ARM GAS  /tmp/ccq7x5yX.s 			page 7


 218              		.loc 1 130 14 is_stmt 0 view .LVU47
 219 0000 0268     		ldr	r2, [r0]
 220              		.loc 1 130 34 view .LVU48
 221 0002 0F4B     		ldr	r3, .L25
 222 0004 1B68     		ldr	r3, [r3]
 223              		.loc 1 130 8 view .LVU49
 224 0006 9A42     		cmp	r2, r3
 225 0008 00D0     		beq	.L24
 226              	.LVL17:
 227              	.L21:
 228              		.loc 1 130 8 view .LVU50
 229 000a 7047     		bx	lr
 230              	.LVL18:
 231              	.L24:
 232              	.LBB4:
 131:Core/Src/uart_tasks.c ****         // Â∞Ü CMSIS ‰ø°Âè∑ÈáèÂè•ÊüÑËΩ¨Êç¢‰∏∫ FreeRTOS Native Âè•ÊüÑ
 132:Core/Src/uart_tasks.c ****         SemaphoreHandle_t tx_done_semaphore_native = UartTxDoneSemaphoreHandle;
 233              		.loc 1 132 9 is_stmt 1 view .LVU51
 234              		.loc 1 132 27 is_stmt 0 view .LVU52
 235 000c 0D4B     		ldr	r3, .L25+4
 236 000e 1868     		ldr	r0, [r3]
 237              	.LVL19:
 133:Core/Src/uart_tasks.c ****         
 134:Core/Src/uart_tasks.c ****         if (tx_done_semaphore_native != NULL) {
 238              		.loc 1 134 9 is_stmt 1 view .LVU53
 239              		.loc 1 134 12 is_stmt 0 view .LVU54
 240 0010 0028     		cmp	r0, #0
 241 0012 FAD0     		beq	.L21
 242              	.LBE4:
 128:Core/Src/uart_tasks.c ****     // Ê£ÄÊü•ÊòØÂê¶ÊòØÁõÆÊ†á UART
 243              		.loc 1 128 57 view .LVU55
 244 0014 00B5     		push	{lr}
 245              	.LCFI4:
 246              		.cfi_def_cfa_offset 4
 247              		.cfi_offset 14, -4
 248 0016 83B0     		sub	sp, sp, #12
 249              	.LCFI5:
 250              		.cfi_def_cfa_offset 16
 251              	.LBB6:
 252              	.LBB5:
 135:Core/Src/uart_tasks.c ****             BaseType_t xHigherPriorityTaskWoken = pdFALSE;
 253              		.loc 1 135 13 is_stmt 1 view .LVU56
 254              		.loc 1 135 24 is_stmt 0 view .LVU57
 255 0018 0023     		movs	r3, #0
 256 001a 0193     		str	r3, [sp, #4]
 136:Core/Src/uart_tasks.c ****             // ÈáäÊîæ‰ø°Âè∑ÈáèÔºåÂî§ÈÜí Tx Task
 137:Core/Src/uart_tasks.c ****             xSemaphoreGiveFromISR(tx_done_semaphore_native, &xHigherPriorityTaskWoken);
 257              		.loc 1 137 13 is_stmt 1 view .LVU58
 258 001c 01A9     		add	r1, sp, #4
 259 001e FFF7FEFF 		bl	xQueueGiveFromISR
 260              	.LVL20:
 138:Core/Src/uart_tasks.c ****             portYIELD_FROM_ISR(xHigherPriorityTaskWoken);
 261              		.loc 1 138 13 view .LVU59
 262 0022 019B     		ldr	r3, [sp, #4]
 263 0024 4BB1     		cbz	r3, .L17
 264              		.loc 1 138 13 discriminator 1 view .LVU60
 265 0026 4FF0E023 		mov	r3, #-536813568
ARM GAS  /tmp/ccq7x5yX.s 			page 8


 266 002a 4FF08052 		mov	r2, #268435456
 267 002e C3F8042D 		str	r2, [r3, #3332]
 268              		.loc 1 138 13 discriminator 1 view .LVU61
 269              		.syntax unified
 270              	@ 138 "Core/Src/uart_tasks.c" 1
 271 0032 BFF34F8F 		dsb
 272              	@ 0 "" 2
 273              		.loc 1 138 13 discriminator 1 view .LVU62
 274              	@ 138 "Core/Src/uart_tasks.c" 1
 275 0036 BFF36F8F 		isb
 276              	@ 0 "" 2
 277              		.loc 1 138 57 discriminator 3 view .LVU63
 278              		.thumb
 279              		.syntax unified
 280              	.L17:
 281              	.LBE5:
 282              	.LBE6:
 139:Core/Src/uart_tasks.c ****         }
 140:Core/Src/uart_tasks.c ****     }
 141:Core/Src/uart_tasks.c **** }
 283              		.loc 1 141 1 is_stmt 0 view .LVU64
 284 003a 03B0     		add	sp, sp, #12
 285              	.LCFI6:
 286              		.cfi_def_cfa_offset 4
 287              		@ sp needed
 288 003c 5DF804FB 		ldr	pc, [sp], #4
 289              	.L26:
 290              		.align	2
 291              	.L25:
 292 0040 00000000 		.word	huart3
 293 0044 00000000 		.word	UartTxDoneSemaphoreHandle
 294              		.cfi_endproc
 295              	.LFE140:
 297              		.section	.text.StartMPU6050Task,"ax",%progbits
 298              		.align	1
 299              		.global	StartMPU6050Task
 300              		.syntax unified
 301              		.thumb
 302              		.thumb_func
 304              	StartMPU6050Task:
 305              	.LFB141:
 142:Core/Src/uart_tasks.c **** 
 143:Core/Src/uart_tasks.c **** 
 144:Core/Src/uart_tasks.c **** /**
 145:Core/Src/uart_tasks.c ****  * @brief Function implementing the MPU6050Task thread.
 146:Core/Src/uart_tasks.c ****  */
 147:Core/Src/uart_tasks.c **** void StartMPU6050Task(void *argument)
 148:Core/Src/uart_tasks.c **** {
 306              		.loc 1 148 1 is_stmt 1 view -0
 307              		.cfi_startproc
 308              		@ Volatile: function does not return.
 309              		@ args = 0, pretend = 0, frame = 0
 310              		@ frame_needed = 0, uses_anonymous_args = 0
 311              	.LVL21:
 312              		.loc 1 148 1 is_stmt 0 view .LVU66
 313 0000 08B5     		push	{r3, lr}
 314              	.LCFI7:
ARM GAS  /tmp/ccq7x5yX.s 			page 9


 315              		.cfi_def_cfa_offset 8
 316              		.cfi_offset 3, -8
 317              		.cfi_offset 14, -4
 318              	.LVL22:
 319              	.L28:
 149:Core/Src/uart_tasks.c ****     /* Infinite loop */
 150:Core/Src/uart_tasks.c ****     for(;;)
 320              		.loc 1 150 5 is_stmt 1 view .LVU67
 151:Core/Src/uart_tasks.c ****     {
 152:Core/Src/uart_tasks.c ****         // MPU6050 ‰º†ÊÑüÂô®ËØªÂèñÈÄªËæë
 153:Core/Src/uart_tasks.c ****         osDelay(100);
 321              		.loc 1 153 9 discriminator 1 view .LVU68
 322 0002 6420     		movs	r0, #100
 323 0004 FFF7FEFF 		bl	osDelay
 324              	.LVL23:
 150:Core/Src/uart_tasks.c ****     {
 325              		.loc 1 150 5 view .LVU69
 326 0008 FBE7     		b	.L28
 327              		.cfi_endproc
 328              	.LFE141:
 330              		.global	UartTxQueue
 331              		.section	.bss.UartTxQueue,"aw",%nobits
 332              		.align	2
 335              	UartTxQueue:
 336 0000 00000000 		.space	4
 337              		.global	UartRxTaskHandle_ISR
 338              		.section	.bss.UartRxTaskHandle_ISR,"aw",%nobits
 339              		.align	2
 342              	UartRxTaskHandle_ISR:
 343 0000 00000000 		.space	4
 344              		.text
 345              	.Letext0:
 346              		.file 2 "/usr/lib/gcc/arm-none-eabi/13.2.1/include/stdint.h"
 347              		.file 3 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 348              		.file 4 "/usr/lib/gcc/arm-none-eabi/13.2.1/include/stddef.h"
 349              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 350              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 351              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 352              		.file 8 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 353              		.file 9 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 354              		.file 10 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 355              		.file 11 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 356              		.file 12 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 357              		.file 13 "Core/Inc/protocol.h"
 358              		.file 14 "Core/Inc/usart.h"
 359              		.file 15 "Core/Inc/uart_tasks.h"
 360              		.file 16 "Core/Inc/uart_driver.h"
 361              		.file 17 "/usr/include/newlib/string.h"
 362              		.file 18 "<built-in>"
ARM GAS  /tmp/ccq7x5yX.s 			page 10


DEFINED SYMBOLS
                            *ABS*:00000000 uart_tasks.c
     /tmp/ccq7x5yX.s:21     .text.StartUartRxTask:00000000 $t
     /tmp/ccq7x5yX.s:27     .text.StartUartRxTask:00000000 StartUartRxTask
     /tmp/ccq7x5yX.s:115    .text.StartUartRxTask:0000005c $d
     /tmp/ccq7x5yX.s:335    .bss.UartTxQueue:00000000 UartTxQueue
     /tmp/ccq7x5yX.s:125    .text.StartUartTxTask:00000000 $t
     /tmp/ccq7x5yX.s:131    .text.StartUartTxTask:00000000 StartUartTxTask
     /tmp/ccq7x5yX.s:196    .text.StartUartTxTask:0000003c $d
     /tmp/ccq7x5yX.s:204    .text.HAL_UART_TxCpltCallback:00000000 $t
     /tmp/ccq7x5yX.s:210    .text.HAL_UART_TxCpltCallback:00000000 HAL_UART_TxCpltCallback
     /tmp/ccq7x5yX.s:292    .text.HAL_UART_TxCpltCallback:00000040 $d
     /tmp/ccq7x5yX.s:298    .text.StartMPU6050Task:00000000 $t
     /tmp/ccq7x5yX.s:304    .text.StartMPU6050Task:00000000 StartMPU6050Task
     /tmp/ccq7x5yX.s:332    .bss.UartTxQueue:00000000 $d
     /tmp/ccq7x5yX.s:342    .bss.UartRxTaskHandle_ISR:00000000 UartRxTaskHandle_ISR
     /tmp/ccq7x5yX.s:339    .bss.UartRxTaskHandle_ISR:00000000 $d

UNDEFINED SYMBOLS
xTaskGetCurrentTaskHandle
UART_Start_DMA_Receive
xTaskNotifyWait
memcpy
Protocol_ParseFrame
Protocol_DispatchCommand
UartTxQueueHandle
UartRxTaskHandle
huart3
uart_rx_dma_buffer
osMessageQueueGet
HAL_UART_Transmit_DMA
xQueueSemaphoreTake
UartTxDoneSemaphoreHandle
xQueueGiveFromISR
osDelay
